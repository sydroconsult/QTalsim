<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Connect to Talsim DB &#8212; QTalsim 1.2.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css?v=89b800e6" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=4c8675c2"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Step by Step" href="hrus_step_by_step.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="hrus_step_by_step.html" title="Step by Step"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">QTalsim 1.2.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Connect to Talsim DB</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="connect-to-talsim-db">
<h1>Connect to Talsim DB<a class="headerlink" href="#connect-to-talsim-db" title="Permalink to this heading">¶</a></h1>
<blockquote>
<div><p>The second functionality of QTalsim allows users to connect to a Talsim Database, load system elements, sub-basins, outflows and transport reaches.
Moreover, users can edit all existing system-elements and the geometries of sub-basins and transport reaches. It is also possible to import sub-basins and transport reaches from external layers.</p>
<p><img alt="DB Connection Overview" src="_images/db_connectionOverview.png" /></p>
</div></blockquote>
<section id="id1">
<h2>Connect to Talsim DB<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p>The next step requires selecting a scenario from the list and confirming this scenario by clicking “Confirm Scenario and load Layers”.
As a result, the System Elements, Outflows, TransportReaches Sub-basins are added to a layer group (named after the scenario) in the active QGIS-Project.
The SystemElement-layer contains all system elements, located based on longitude and latitude attributes. The Sub-basins layer contains the polygons of all
sub-basins in the Talsim DB, while TransportReach contains all lines of the TransportReach as defined by the “Geometry”-column. These three layers can be edited. The outflows
depict the corresponding lines between the system elements and this layer can not be edited and edits of the Ouflows layer are not saved to the DB.</p>
<p>At any stage, you can click the “Reconnect to DB and Reload Layers” button at the bottom to reconnect to the database, e.g., if you wish to inspect changes.</p>
</div></blockquote>
</section>
<section id="edit-features-of-talsim-db">
<h2>Edit features of Talsim DB<a class="headerlink" href="#edit-features-of-talsim-db" title="Permalink to this heading">¶</a></h2>
<blockquote id="edit-existing">
<div><p>The layers SystemElement, Sub-basins and TransportReach can be edited by the user. All edits/inserts/deletions made by the user are saved to the connected Talsim DB.
As shown in the screenshot below, the user must select the layer to be edited in the layer group and then click the ‘Toggle Editing’ button to start the editing mode for this layer.
Using the editing options of QGIS, the user is now able to make any changes to the geometries of these three layers
(find further information <a class="reference external" href="https://docs.qgis.org/3.34/en/docs/user_manual/working_with_vector/editing_geometry_attributes.html">here</a>).
<img alt="Edit Sub-basins" src="_images/db_editSubBasins.png" /></p>
</div></blockquote>
<section id="systemelement">
<h3>SystemElement<a class="headerlink" href="#systemelement" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><p>The SystemElement-layer is a point layer that holds all SystemElements. Users can insert new elements, delete unwanted ones, or update existing elements.
To insert new elements, simply add a new point to the SystemElement-layer and then fill in the fields displayed in the prompt.
The most critical field to fill in is the ‘Identifier’ field. The first character of the identifier represents the ElementTypeCharacter of the system element (e.g., A for sub-basins).
Therefore, it is essential for users to insert the correct ElementTypeCharacter here. The remainder of the ‘Identifier’ field serves as the ElementIdentifier.
The Id (SystemElementId) is automatically added by the plugin. All other fields are optional and can be left empty (=’NULL’).</p>
<p>Another option is to delete system elements by removing the unwanted point feature.</p>
<p>Users can also edit existing system elements by either modifying the fields in the attribute table or editing the point geometries. Editing the geometries updates the
‘Latitude’ and ‘Longitude’ columns to reflect the location as defined by the user. Please note that it is not possible to change the element type of system elements.</p>
<p>Please note that it is important to save changes by clicking the ‘Commit Changes’ button. As a result, newly added features are inserted into the database, edited geometries of
existing features are updated in the database and deleted features are deleted from the DB. A log message (QTalsim-log) provides details on all updated/inserted features.</p>
</div></blockquote>
</section>
<section id="sub-basins-and-transportreach-wip">
<h3>Sub-basins and TransportReach - WIP<a class="headerlink" href="#sub-basins-and-transportreach-wip" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><p>Additionally to editing SystemElements directly, it is also possible to edit the geometries of transport reaches (lines) and sub-basins (polygons).
It is possible to update existing geometries/attributes, delete sub-basins, to insert geometries to existing system elements or to add new sub-basins/transport-reaches.</p>
<p>When confirming the geometry of the new sub-basin, you must insert the identifier of the sub-basin into the field ‘Identifier’. Optionally you can update any other fields. Only fields,
that do not have Null-values are updated in the DB.
The field ‘Geometry’ is automatically filled with the WKT of the new geometry. Fields ‘Latitude’ and ‘Longitude’ are automatically filled with the coordinates of the sub-basin’s center.</p>
<p>Once you have finished editing existing polygons and/or inserting all new sub-basins, it is again important to save the edits
by clicking the ‘Commit Changes’ button.</p>
<p>Another feature provided is the option to update the coordinates of sub-basins to the center of the sub-basins (button “Optional: Update Coordinates to Center of Sub-basins”).
Clicking this button calculates the centroid of all sub-basins, and updates all coordinates (columns ‘Latitude’ and ‘Longitude’) with the centroid’s coordinates.</p>
</div></blockquote>
</section>
</section>
<section id="external-sub-basins-layer">
<h2>External Sub-basins Layer<a class="headerlink" href="#external-sub-basins-layer" title="Permalink to this heading">¶</a></h2>
<blockquote id="external-layer">
<div><p>An additional feature allows for adding an external polygon layer to include sub-basin geometries into existing sub-basins or to add new sub-basins to the database.
First, you must select a polygon layer from the list. This layer must contain a Unique Identifier field with the ‘ElementTypeCharacter’ and the ‘ElementIdentifier’ (e.g., AA001).
Select this field from the list, and you can optionally also select a field containing the name of the sub-basin.
When selecting a name-field the content is added to the feature’s ‘Name’-field in the DB. When selecting a name field, the content is added to the feature’s ‘Name’ field in the database.
If you are updating existing features, you can update the point coordinates by selecting the corresponding checkbox.</p>
<p>By clicking ‘Save New/Updated Features in DB,’ all new features or features with updated geometry are saved in the database. By clicking ‘Optional: View updated/new Features in Layer’ a new
layer with the updated/inserted features is added to the layer group.
Again, the information about the updated/inserted features is logged to the QTalsim-log.</p>
<p><img alt="External layer" src="_images/db_externalLayer.png" /></p>
</div></blockquote>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Connect to Talsim DB</a><ul>
<li><a class="reference internal" href="#id1">Connect to Talsim DB</a></li>
<li><a class="reference internal" href="#edit-features-of-talsim-db">Edit features of Talsim DB</a><ul>
<li><a class="reference internal" href="#systemelement">SystemElement</a></li>
<li><a class="reference internal" href="#sub-basins-and-transportreach-wip">Sub-basins and TransportReach - WIP</a></li>
</ul>
</li>
<li><a class="reference internal" href="#external-sub-basins-layer">External Sub-basins Layer</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="hrus_step_by_step.html"
                          title="previous chapter">Step by Step</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/doc_connect_to_db.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="hrus_step_by_step.html" title="Step by Step"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">QTalsim 1.2.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Connect to Talsim DB</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2024, Sydro Consult GmbH.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
    </div>
  </body>
</html>